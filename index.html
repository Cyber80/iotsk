<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SmartFarm Dashboard</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css" />

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/utc.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/timezone.js"></script>
  <script>dayjs.extend(dayjs_plugin_utc); dayjs.extend(dayjs_plugin_timezone);</script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- Leaflet (Map) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <div id="app" class="container">
    <header class="header">
  <h1>
    <img src="icons/school-logo.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" width="60" style="margin-bottom:8px;">
    SmartFarm Control Panelüåø
    <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏à‡∏≤‡∏Å profile) -->
    <span id="farmBadge" class="tag" title="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ü‡∏≤‡∏£‡πå‡∏°">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
  </h1>
  <div class="header-right">
    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏≤‡∏£‡πå‡∏°) -->
    <a class="btn brand2" href="profile.html">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ü‡∏≤‡∏£‡πå‡∏°</a>

    <span class="tag" id="connTag">offline demo</span>
    <span class="muted">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: <b id="lastUpdate">-</b></span>
    <button class="btn ghost" id="btnTheme">‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏µ</button>
    <button class="btn ghost" id="btnInstall" style="display:none">‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ</button>
  </div>
</header>

    <!-- KPIs -->
    <section class="grid kpis">
      <div class="card">
        <h3>Soil Moisture</h3>
        <div class="kpi"><div class="val" id="kpi-soil">-</div><small>%</small></div>
        <div class="muted">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 24 ‡∏ä‡∏°. <b id="avg-soil">-</b>%</div>
      </div>
      <div class="card">
        <h3>Light</h3>
        <div class="kpi"><div class="val" id="kpi-light">-</div><small>lux</small></div>
        <div class="muted">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 24 ‡∏ä‡∏°. <b id="avg-light">-</b> lux</div>
      </div>
      <div class="card">
        <h3>‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h3>
        <div class="row">
          ‡πÑ‡∏ü: <span id="lampStatus" class="pill off">OFF</span>
          ‡∏õ‡∏±‡πä‡∏°: <span id="pumpStatus" class="pill off">OFF</span>
        </div>
        <div class="sep"></div>
        <div class="row">
          <button class="btn brand2" id="btnLamp">‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏ü üí°</button>
          <button class="btn brand" id="btnPump">‡∏™‡∏•‡∏±‡∏ö‡∏õ‡∏±‡πä‡∏° üíß</button>
        </div>
      </div>
    </section>

    <!-- Charts -->
    <section class="grid two">
      <div class="card">
        <div class="row between">
          <h3>Soil & Light</h3>
          <div class="row">
            <select id="rangeSelect">
              <option value="24h">24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
              <option value="7d">7 ‡∏ß‡∏±‡∏ô</option>
              <option value="30d">30 ‡∏ß‡∏±‡∏ô</option>
              <option value="1y">1 ‡∏õ‡∏µ</option>
              <option value="custom">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</option>
            </select>
            <input type="date" id="fromDate" class="hide">
            <input type="date" id="toDate" class="hide">
            <button class="btn" id="btnApplyRange">‡∏î‡∏π</button>
          </div>
        </div>
        <div class="chartwrap"><canvas id="chartMain"></canvas></div>
      </div>

      <div class="card">
        <h3>Temperature & Humidity</h3>
        <div class="chartwrap"><canvas id="chartTH"></canvas></div>
      </div>
    </section>

    <!-- Auto/Manual & Schedule -->
    <section class="grid two">
      <div class="card">
        <h3>‡πÇ‡∏´‡∏°‡∏î‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</h3>
        <div class="row">
          <label class="switch"><input type="checkbox" id="modeAuto"> <span>Auto</span></label>
          <span class="muted">‡πÄ‡∏°‡∏∑‡πà‡∏≠ Auto: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ ‚Äú‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥/‡∏™‡∏±‡πà‡∏á‚Äù ‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå ‡∏´‡∏≤‡∏Å‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï</span>
        </div>
        <div class="sep"></div>
        <div class="grid three">
          <div class="field">
            <label class="label">Threshold Soil (%)</label>
            <input type="number" id="thSoil" min="0" max="100" step="1" value="35">
            <span class="muted">‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°</span>
          </div>
          <div class="field">
            <label class="label">Max Pump (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
            <input type="number" id="maxPumpMin" min="1" max="60" step="1" value="10">
            <span class="muted">‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô</span>
          </div>
          <div class="field">
            <label class="label">‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</label>
            <select id="autoEnforce">
              <option value="off">‡πÅ‡∏Ñ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</option>
              <option value="on">‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô</option>
            </select>
          </div>
        </div>
        <div class="sep"></div>
        <div id="autoAdvice" class="muted">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: -</div>
      </div>

      <div class="card">
        <h3>Schedule ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h3>
        <div class="grid three">
          <div class="field"><label class="label">‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°</label><input type="time" id="schOn" value="06:30"></div>
          <div class="field"><label class="label">‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°</label><input type="time" id="schOff" value="06:45"></div>
          <div class="field"><label class="label">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label>
            <select id="schEnable"><option value="on">‡πÄ‡∏õ‡∏¥‡∏î</option><option value="off">‡∏õ‡∏¥‡∏î</option></select>
          </div>
        </div>
        <div class="muted">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï)</div>
      </div>
    </section>

    <!-- Weather + Map -->
    <section class="grid two">
      <div class="card">
        <h3>‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® & ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå</h3>
        <div class="row wrap">
          <div class="muted">‡∏û‡∏¥‡∏Å‡∏±‡∏î: <span id="latlon">-</span></div>
          <button class="btn ghost" id="btnUseGeoloc">‡πÉ‡∏ä‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏â‡∏±‡∏ô</button>
          <button class="btn" id="btnRefreshWeather">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå</button>
        </div>
        <div class="weather">
          <div>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <b id="wx-temp">-</b>¬∞C | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: <b id="wx-humi">-</b>%</div>
          <div>‡∏ù‡∏ô 24 ‡∏ä‡∏°.‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤: <b id="wx-rain">-</b> mm</div>
          <div class="muted">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ ‚Äú‡∏ä‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏î‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‚Äù ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏ù‡∏ô‡∏à‡∏∞‡∏ï‡∏Å‡∏°‡∏≤‡∏Å</div>
        </div>
      </div>

      <div class="card">
        <h3>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ü‡∏≤‡∏£‡πå‡∏°</h3>
        <div id="map"></div>
        <div class="muted">‡∏•‡∏≤‡∏Å‡∏´‡∏°‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏•‡∏π‡∏Å</div>
      </div>
    </section>

    <!-- Import/Export -->
    <section class="card">
      <h3>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤/‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å</h3>
      <div class="row wrap">
        <button class="btn" id="btnExportCSV">Export CSV</button>
        <button class="btn" id="btnExportPNG">Export PNG</button>
        <button class="btn" id="btnExportJPG">Export JPG</button>
        <button class="btn" id="btnExportPDF">Export PDF</button>
        <span class="sep v"></span>
        <input type="file" id="fileImport" accept=".json,.csv" />
        <button class="btn ghost" id="btnImport">Import</button>
      </div>
    </section>

    <!-- Table -->
    <section class="card">
      <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
      <div class="tablewrap">
        <table id="dataTable">
          <thead>
            <tr>
              <th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>Soil</th><th>Light</th><th>Temp</th><th>Humidity</th><th>Pump</th><th>Lamp</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

<footer class="footer muted">
  <div>SmartFarm Dashboard ‚Ä¢ Sakaeo School üåøüíõ</div>
  <div class="team">
    <b>‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥:</b>
    <ul>
      <li>‡∏Ñ‡∏£‡∏π‡∏™‡∏∏‡πÄ‡∏°‡∏ò ‡∏™‡∏≤‡∏¢‡∏ä‡∏• ‚Äì ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ Dashboard</li>
      <li>‡∏Ñ‡∏£‡∏π‡∏ò‡∏ô‡∏û‡∏±‡∏í‡∏ô‡πå ‡∏†‡∏±‡∏Å‡∏î‡∏µ ‚Äì ‡∏î‡∏π‡πÅ‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• IOT ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ú‡∏•</li>
      <li>‡∏Ñ‡∏£‡∏π‡∏ß‡∏£‡∏≤‡∏†‡∏±‡∏™‡∏£‡πå ‡∏†‡∏π‡∏™‡∏∏‡∏ô‡∏ó‡∏£ ‚Äì ‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</li>
    </ul>
  </div>
  <div>¬© 2025 Sakaeo School, Sakaeo ‚Ä¢ For educational use</div>
</footer>

  </div>

  <script src="app.js"></script>
</body>
</html>
